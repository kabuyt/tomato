<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ãƒˆãƒãƒˆ N5">
    <link rel="apple-touch-icon" href="images/icon.png">
    <link rel="icon" type="image/png" href="images/icon.png">

    <title>ãƒˆãƒãƒˆ N5 - Sorted List</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; text-align: center; background: #FFF9E6; color: #333; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        .page { display: none; padding: 20px; min-height: 100vh; box-sizing: border-box; }
        .active { display: block; }
        .main-logo { font-size: 80px; margin-top: 30px; display: block; }
        .menu-grid { display: grid; gap: 12px; max-width: 400px; margin: 20px auto; padding: 10px; }
        .menu-btn { 
            padding: 20px; font-size: 19px; font-weight: bold; border: none; border-radius: 20px; 
            background: white; border-bottom: 5px solid #FFCDD2; cursor: pointer; color: #FF5252; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .menu-btn:active { transform: translateY(2px); border-bottom-width: 2px; }
        .list-btn { background: #FFAB91; color: white; border-bottom-color: #D84315; margin-top: 10px; }
        #mode-selection { background: white; border-radius: 25px; padding: 20px; border: 3px solid #FF5252; margin-top: 10px; display: none; }
        .card { background: white; border-radius: 30px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 500px; margin: 10px auto; border: 4px solid #FF5252; min-height: 380px; display: flex; flex-direction: column; justify-content: center; }
        .word { font-size: 45px; font-weight: bold; color: #FF5252; margin: 10px 0; }
        .opt-btn { padding: 18px; font-size: 18px; border: none; border-radius: 15px; background: #FFEBEE; border-bottom: 4px solid #FFCDD2; cursor: pointer; margin-bottom: 8px; width: 100%; }
        .btn-back { background: #666; color: white; border: none; padding: 10px 20px; border-radius: 12px; margin-bottom: 15px; cursor: pointer; }
        
        /* ãƒªã‚¹ãƒˆè¡¨ç¤ºç”¨ */
        .list-section-title { text-align: left; font-size: 20px; font-weight: bold; color: #FF5252; margin: 20px 0 10px 5px; border-left: 5px solid #FF5252; padding-left: 10px; max-width: 500px; margin-left: auto; margin-right: auto; }
        .list-item { background: white; margin: 6px auto; padding: 12px; border-radius: 15px; max-width: 500px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #FFCDD2; }
        .cat-tag { font-size: 10px; padding: 2px 6px; border-radius: 5px; color: white; margin-left: 8px; vertical-align: middle; }
    </style>
</head>
<body>

    <div id="menu-page" class="page active">
        <span class="main-logo">ğŸ…</span>
        <h1 style="color:#FF5252;">ãƒˆãƒãƒˆ N5</h1>
        <div class="menu-grid">
            <button class="menu-btn" onclick="selectCategory('verb')">ğŸ ã©ã†ã— (Verb)</button>
            <button class="menu-btn" onclick="selectCategory('noun')">ğŸ“˜ ã‚ã„ã— (Noun)</button>
            <button class="menu-btn" onclick="selectCategory('adj')">âœ¨ ã‘ã„ã‚ˆã†ã— (Adj)</button>
            <div id="mode-selection">
                <p id="selected-label" style="font-weight:bold; color:#FF5252; margin-bottom:15px;"></p>
                <button class="menu-btn" style="background:#FFF3E0; width:100%; margin-bottom:10px;" onclick="startGame('practice')">ğŸ“– ã‚Œã‚“ã—ã‚…ã† (All)</button>
                <button class="menu-btn" style="background:#FFEBEE; width:100%; margin-bottom:10px;" onclick="startGame('test')">ğŸ“ ã¦ã™ã¨ (10)</button>
                <button class="btn-back" onclick="cancelSelection()">ã‚‚ã©ã‚‹</button>
            </div>
            <button class="menu-btn list-btn" onclick="showListPage()">ğŸ“‹ ãƒªã‚¹ãƒˆã‚’ã¿ã‚‹ (Full List)</button>
        </div>
    </div>

    <div id="quiz-page" class="page">
        <button class="btn-back" onclick="goToMenu()">â† Menu</button>
        <div class="card">
            <div id="quiz-content">
                <div id="progress" style="font-size:14px; color:#999"></div>
                <div id="word" class="word"></div>
                <div id="options-container"></div>
                <div id="message" style="margin-top:20px; font-weight:bold; font-size:24px; color:#FF5252; height:30px;"></div>
            </div>
            <div id="result-content" style="display:none;">
                <h2 style="color:#FF5252;">ãŠã‚ã‚Šï¼</h2>
                <div id="score-display" style="font-size:60px; font-weight:bold; color:#FF5252;"></div>
                <button class="menu-btn" onclick="goToMenu()" style="width:100%">Menuã«ã‚‚ã©ã‚‹</button>
            </div>
        </div>
    </div>

    <div id="list-page" class="page">
        <button class="btn-back" onclick="goToMenu()">â† ã‚‚ã©ã‚‹</button>
        <h2 style="color:#FF5252;">ã“ã¨ã°ã®ãƒªã‚¹ãƒˆ (<span id="list-count">0</span>)</h2>
        <div id="list-container"></div>
    </div>

    <script>
        const allData = [
            // ã©ã†ã— (G1-G3)
            {q:"ã‚ã†",v:"gáº·p",i:"bertemu",g:1},{q:"ã„ã",v:"Ä‘i",i:"pergi",g:1},{q:"ã‹ãˆã‚‹",v:"vá»",i:"pulang",g:1},{q:"ã®ã‚€",v:"uá»‘ng",i:"minum",g:1},
            {q:"ã‹ã†",v:"mua",i:"membeli",g:1},{q:"ãã",v:"nghe",i:"mendengar",g:1},{q:"ã‹ã",v:"viáº¿t",i:"menulis",g:1},{q:"ã‚ˆã‚€",v:"Ä‘á»c",i:"membaca",g:1},
            {q:"ã„ã†",v:"nÃ³i",i:"berbicara",g:1},{q:"ã¾ã¤",v:"Ä‘á»£i",i:"menunggu",g:1},{q:"ã‚ˆã¶",v:"gá»i",i:"memanggil",g:1},{q:"ã‚ãã¶",v:"chÆ¡i",i:"bermain",g:1},
            {q:"ã„ãã",v:"vá»™i",i:"terburu-buru",g:1},{q:"ãŠã‚ˆã",v:"bÆ¡i",i:"berenang",g:1},{q:"ã¯ãªã™",v:"nÃ³i chuyá»‡n",i:"berbicara",g:1},{q:"ãŸã¤",v:"Ä‘á»©ng",i:"berdiri",g:1},
            {q:"ã™ã‚ã‚‹",v:"ngá»“i",i:"duduk",g:1},{q:"ã¯ã„ã‚‹",v:"vÃ o",i:"masuk",g:1},{q:"ã†ã‚‹",v:"bÃ¡n",i:"menjual",g:1},{q:"ã¤ãã‚‹",v:"lÃ m",i:"membuat",g:1},
            {q:"ãŠã‚ã‚‹",v:"xong",i:"selesai",g:1},{q:"ã‚ã‚‹ã",v:"Ä‘i bá»™",i:"berjalan",g:1},{q:"ãŠã",v:"Ä‘áº·t",i:"menaruh",g:1},{q:"ã ã™",v:"láº¥y ra",i:"mengeluarkan",g:1},
            {q:"ã—ã‚‹",v:"biáº¿t",i:"tahu",g:1},{q:"ã‚ã‹ã‚‹",v:"hiá»ƒu",i:"mengerti",g:1},{q:"ã‚ã‚‰ã†",v:"cÆ°á»i",i:"tertawa",g:1},{q:"ã‚ã‚‰ã†",v:"rá»­a",i:"mencuci",g:1},
            {q:"ãŠãã‚‹",v:"dáº­y",i:"bangun",g:2},{q:"ã­ã‚‹",v:"ngá»§",i:"tidur",g:2},{q:"ãŸã¹ã‚‹",v:"Äƒn",i:"makan",g:2},{q:"ã¿ã‚‹",v:"xem",i:"melihat",g:2},
            {q:"ã‚ã‘ã‚‹",v:"má»Ÿ",i:"membuka",g:2},{q:"ã—ã‚ã‚‹",v:"Ä‘Ã³ng",i:"menutup",g:2},{q:"ãŠã—ãˆã‚‹",v:"dáº¡y",i:"mengajar",g:2},{q:"ã‹ã‚Šã‚‹",v:"mÆ°á»£n",i:"meminjam",g:2},
            {q:"ãã‚‹",v:"Ä‘áº¿n",i:"datang",g:3},{q:"ã™ã‚‹",v:"lÃ m",i:"melakukan",g:3},{q:"ã¹ã‚“ãã‚‡ã†ã™ã‚‹",v:"há»c",i:"belajar",g:3},{q:"ã‹ã„ã‚‚ã®ã™ã‚‹",v:"mua sáº¯m",i:"belanja",g:3},
            
            // ã‚ã„ã—
            {q:"ãŒã£ã“ã†",v:"trÆ°á»ng",i:"sekolah",g:0},{q:"ã›ã‚“ã›ã„",v:"giÃ¡o viÃªn",i:"guru",g:0},{q:"ã¨ã‚‚ã ã¡",v:"báº¡n",i:"teman",g:0},{q:"ã¿ãš",v:"nÆ°á»›c",i:"air",g:0},
            {q:"ã”ã¯ã‚“",v:"cÆ¡m",i:"nasi",g:0},{q:"ã»ã‚“",v:"sÃ¡ch",i:"buku",g:0},{q:"ãã‚‹ã¾",v:"xe",i:"mobil",g:0},{q:"ã‹ã°ã‚“",v:"tÃºi",i:"tas",g:0},
            {q:"ã¨ã‘ã„",v:"Ä‘á»“ng há»“",i:"jam",g:0},{q:"ã¤ããˆ",v:"bÃ n",i:"meja",g:0},{q:"ã„ã™",v:"gháº¿",i:"kursi",g:0},{q:"ãŠã‹ã­",v:"tiá»n",i:"uang",g:0},
            {q:"ãªã¾ãˆ",v:"tÃªn",i:"nama",g:0},{q:"ã¸ã‚„",v:"phÃ²ng",i:"kamar",g:0},{q:"ã¦ã‚Œã³",v:"tivi",i:"TV",g:0},{q:"ãã‚‡ã†",v:"nay",i:"hari ini",g:0},
            {q:"ã‚ã—ãŸ",v:"mai",i:"besok",g:0},{q:"ãã®ã†",v:"qua",i:"kemarin",g:0},{q:"ã‚ã•",v:"sÃ¡ng",i:"pagi",g:0},{q:"ã‚ˆã‚‹",v:"tá»‘i",i:"malam",g:0},
            {q:"ã‹ãã",v:"gia Ä‘Ã¬nh",i:"keluarga",g:0},{q:"ã«ã",v:"thá»‹t",i:"daging",g:0},{q:"ã•ã‹ãª",v:"cÃ¡",i:"ikan",g:0},{q:"ã‚„ã•ã„",v:"rau",i:"sayur",g:0},
            {q:"ãã ã‚‚ã®",v:"trÃ¡i cÃ¢y",i:"buah",g:0},{q:"ãŸã¾ã”",v:"trá»©ng",i:"telur",g:0},{q:"ãŒãã›ã„",v:"há»c sinh",i:"siswa",g:0},{q:"ã³ã‚‡ã†ã„ã‚“",v:"bá»‡nh viá»‡n",i:"RS",g:0},
            
            // ã‘ã„ã‚ˆã†ã—
            {q:"ãŸã‹ã„",v:"cao/Ä‘áº¯t",i:"tinggi/mahal",g:4},{q:"ã‚„ã™ã„",v:"ráº»",i:"murah",g:4},{q:"ãŠã„ã—ã„",v:"ngon",i:"enak",g:4},{q:"ã‚ã¤ã„",v:"nÃ³ng",i:"panas",g:4},
            {q:"ã•ã‚€ã„",v:"láº¡nh",i:"dingin",g:4},{q:"ã„ã„",v:"tá»‘t",i:"baik",g:4},{q:"ã‚ã‚‹ã„",v:"xáº¥u",i:"buruk",g:4},{q:"ãŠãŠãã„",v:"lá»›n",i:"besar",g:4},
            {q:"ã¡ã„ã•ã„",v:"nhá»",i:"kecil",g:4},{q:"ã‚ãŸã‚‰ã—ã„",v:"má»›i",i:"baru",g:4},{q:"ãµã‚‹ã„",v:"cÅ©",i:"lama",g:4},{q:"ã„ããŒã—ã„",v:"báº­n",i:"sibuk",g:4}
        ];

        let currentCategory = '', currentMode = '', quizList = [], current = 0, score = 0;

        function showPage(id) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); document.getElementById(id + '-page').classList.add('active'); }
        function selectCategory(cat) { currentCategory = cat; document.getElementById('mode-selection').style.display = 'block'; document.querySelectorAll('.menu-btn:not(#mode-selection button)').forEach(b => b.style.display = 'none'); }
        function cancelSelection() { document.getElementById('mode-selection').style.display = 'none'; document.querySelectorAll('.menu-btn').forEach(b => b.style.display = 'flex'); }
        function goToMenu() { cancelSelection(); showPage('menu'); }

        function startGame(mode) {
            currentMode = mode;
            let data = (currentCategory === 'verb') ? allData.filter(d => d.g >= 1 && d.g <= 3) : (currentCategory === 'noun') ? allData.filter(d => d.g === 0) : allData.filter(d => d.g === 4);
            quizList = [...data].sort(() => Math.random() - 0.5);
            if(mode === 'test') quizList = quizList.slice(0, 10);
            current = 0; score = 0;
            showPage('quiz');
            document.getElementById("quiz-content").style.display = "block";
            document.getElementById("result-content").style.display = "none";
            showQuestion();
        }

        function showQuestion() {
            let item = quizList[current];
            document.getElementById("progress").innerText = (current + 1) + " / " + quizList.length;
            document.getElementById("word").innerText = item.q;
            document.getElementById("message").innerText = "";
            let correct = item.v;
            let others = allData.map(d => d.v).filter(v => v !== correct);
            let choices = [correct, ...[...new Set(others)].sort(() => Math.random() - 0.5).slice(0, 3)].sort(() => Math.random() - 0.5);
            let container = document.getElementById("options-container");
            container.innerHTML = "";
            choices.forEach(c => {
                let btn = document.createElement("button"); btn.className = "opt-btn"; btn.innerText = c;
                btn.onclick = () => {
                    if(c === correct) { document.getElementById("message").innerText = "â­• OK!"; score++; setTimeout(nextQuestion, 800); }
                    else { document.getElementById("message").innerText = "âŒ " + correct; setTimeout(nextQuestion, 1500); }
                };
                container.appendChild(btn);
            });
        }

        function nextQuestion() { current++; if(current < quizList.length) showQuestion(); else showResult(); }
        function showResult() { document.getElementById("quiz-content").style.display = "none"; document.getElementById("result-content").style.display = "block"; document.getElementById("score-display").innerText = score + "/" + quizList.length; }

        function showListPage() {
            showPage('list');
            const container = document.getElementById('list-container');
            container.innerHTML = "";
            document.getElementById('list-count').innerText = allData.length;

            const categories = [
                { title: "ğŸ ã©ã†ã— (Verb)", filter: d => d.g >= 1 && d.g <= 3, color: "#EF5350" },
                { title: "ğŸ“˜ ã‚ã„ã— (Noun)", filter: d => d.g === 0, color: "#42A5F5" },
                { title: "âœ¨ ã‘ã„ã‚ˆã†ã— (Adj)", filter: d => d.g === 4, color: "#66BB6A" }
            ];

            categories.forEach(cat => {
                const sectionData = allData.filter(cat.filter).sort((a,b) => a.q.localeCompare(b.q, 'ja'));
                if (sectionData.length > 0) {
                    const h3 = document.createElement('div');
                    h3.className = 'list-section-title';
                    h3.innerText = cat.title;
                    container.appendChild(h3);

                    sectionData.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'list-item';
                        div.innerHTML = `<div style="text-align:left;"><b style="font-size:18px;">${item.q}</b><br><span style="color:#666;">${item.v}</span></div><div>ğŸ”Š</div>`;
                        div.onclick = () => { let uttr = new SpeechSynthesisUtterance(item.q); uttr.lang = "ja-JP"; window.speechSynthesis.speak(uttr); };
                        container.appendChild(div);
                    });
                }
            });
        }
    </script>
</body>
</html>
