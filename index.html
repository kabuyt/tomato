<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>„Éà„Éû„Éà - N5 Multi-Lang</title>
    <link rel="apple-touch-icon" href="images/icon.png">
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; text-align: center; background: #FFF9E6; color: #333; margin: 0; padding-bottom: 80px; }
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
        nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 100; }
        nav button { flex: 1; padding: 15px; border: none; background: none; font-weight: bold; font-size: 16px; color: #999; cursor: pointer; }
        nav button.active-nav { color: #FF5252; border-top: 4px solid #FF5252; }

        /* „ÇØ„Ç§„Ç∫„Ç´„Éº„Éâ */
        .card { background: white; border-radius: 30px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 400px; margin: 20px auto; border: 4px solid #FF5252; }
        .correct-jump { animation: tomato-jump 0.5s ease; }
        @keyframes tomato-jump { 0% { transform: scale(1); } 30% { transform: scale(1.1) translateY(-20px); } 100% { transform: scale(1); } }
        
        .word { font-size: 45px; font-weight: bold; color: #FF5252; margin: 10px 0; }
        .options { display: grid; gap: 10px; }
        .opt-btn { padding: 18px; font-size: 18px; border: none; border-radius: 15px; background: #FFEBEE; border-bottom: 4px solid #FFCDD2; cursor: pointer; }

        /* „É™„Çπ„ÉàË°®Á§∫ */
        .group-title { background: #FF5252; color: white; padding: 5px 15px; border-radius: 20px; display: inline-block; margin: 20px 0 10px; font-size: 14px; }
        .list-item { background: white; margin: 8px auto; padding: 12px; border-radius: 12px; max-width: 500px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #FFCDD2; }
        .list-ja { font-size: 20px; font-weight: bold; color: #FF5252; }
        
        .mode-selector { background: #FF5252; padding: 10px; border-radius: 15px; display: inline-block; color: white; margin-bottom: 10px; font-size: 12px; }
        select { border-radius: 5px; border: none; padding: 3px; cursor: pointer; background: white; }
    </style>
</head>
<body>

    <div id="quiz-page" class="page active">
        <div class="mode-selector">
            Lang: 
            <select id="lang-select" onchange="initGame()">
                <option value="vi">Ti·∫øng Vi·ªát</option>
                <option value="id">Indonesia</option>
            </select>
            Mode:
            <select id="mode-select" onchange="initGame()">
                <option value="ja-to-foreign">JP ‚Üí Select</option>
                <option value="foreign-to-ja">Select ‚Üí JP</option>
            </select>
        </div>

        <div class="card" id="main-card">
            <div id="progress" style="font-size:14px; color:#999">1 / 50</div>
            <div id="word" class="word">...</div>
            <div id="reading" style="color:#999; margin-bottom:20px;">...</div>
            <div class="options" id="options-container"></div>
            <div id="message" style="margin-top:20px; font-weight:bold; font-size:24px; height:30px;"></div>
        </div>
    </div>

    <div id="list-page" class="page">
        <h2 id="list-title" style="color:#FF5252">Danh s√°ch</h2>
        <div id="verb-list-container"></div>
    </div>

    <nav>
        <button id="nav-quiz" class="active-nav" onclick="showPage('quiz')">H·ªçc t·∫≠p</button>
        <button id="nav-list" onclick="showPage('list')">Danh s√°ch</button>
    </nav>

    <script>
        const uiText = {
            vi: { study: "H·ªçc t·∫≠p", list: "Danh s√°ch", finish: "B·∫°n ƒë√£ ho√†n th√†nh!", jpTo: "Nh·∫≠t ‚Üí Vi·ªát", forTo: "Vi·ªát ‚Üí Nh·∫≠t" },
            id: { study: "Belajar", list: "Daftar", finish: "Kamu sudah selesai!", jpTo: "Jepang ‚Üí Indo", forTo: "Indo ‚Üí Jepang" }
        };

        // „Éá„Éº„Çø (‰øÆÊ≠£Ê∏à„Åø: „ÅäËµ∑„Åç„Çã -> „Åä„Åç„Çã)
        const allData = [
            { q: "„ÅÇ„ÅÜ", r: "au", v: "g·∫∑p", i: "bertemu", g: 1 },
            { q: "„ÅÑ„Åè", r: "iku", v: "ƒëi", i: "pergi", g: 1 },
            { q: "„ÅÑ„ÅÜ", r: "iu", v: "n√≥i", i: "berbicara", g: 1 },
            { q: "„ÅÜ„Åü„ÅÜ", r: "utau", v: "h√°t", i: "bernyanyi", g: 1 },
            { q: "„ÅÜ„Çã", r: "uru", v: "b√°n", i: "menjual", g: 1 },
            { q: "„Åä„Åè", r: "oku", v: "ƒë·∫∑t", i: "menaruh", g: 1 },
            { q: "„Åä„Çà„Åê", r: "oyogu", v: "b∆°i", i: "berenang", g: 1 },
            { q: "„Åã„ÅÜ", r: "kau", v: "mua", i: "membeli", g: 1 },
            { q: "„Åã„Åè", r: "kaku", v: "vi·∫øt", i: "menulis", g: 1 },
            { q: "„Åç„Åè", r: "kiku", v: "nghe", i: "mendengar", g: 1 },
            { q: "„Åç„Çã", r: "kiru", v: "c·∫Øt", i: "memotong", g: 1 },
            { q: "„Åó„Çã", r: "shiru", v: "bi·∫øt", i: "tahu", g: 1 },
            { q: "„Åô„ÅÜ", r: "suu", v: "h√∫t", i: "menghisap", g: 1 },
            { q: "„Åô„ÇÄ", r: "sumu", v: "s·ªëng", i: "tinggal", g: 1 },
            { q: "„Å†„Åô", r: "dasu", v: "l·∫•y ra", i: "mengeluarkan", g: 1 },
            { q: "„Åü„Å§", r: "tatsu", v: "ƒë·ª©ng", i: "berdiri", g: 1 },
            { q: "„Å§„Åã„ÅÜ", r: "tsukau", v: "s·ª≠ d·ª•ng", i: "menggunakan", g: 1 },
            { q: "„Å§„Åè„Çã", r: "tsukuru", v: "ch·∫ø bi·∫øn", i: "membuat", g: 1 },
            { q: "„Å¶„Å§„Å†„ÅÜ", r: "tetsudau", v: "gi√∫p ƒë·ª°", i: "membantu", g: 1 },
            { q: "„Å®„Çã", r: "toru", v: "ch·ª•p/l·∫•y", i: "mengambil", g: 1 },
            { q: "„Å™„Çâ„ÅÜ", r: "narau", v: "h·ªçc", i: "belajar", g: 1 },
            { q: "„Å¨„Åê", r: "nugu", v: "c·ªüi", i: "melepas", g: 1 },
            { q: "„ÅÆ„ÇÄ", r: "nomu", v: "u·ªëng", i: "minum", g: 1 },
            { q: "„ÅÆ„Çã", r: "noru", v: "l√™n xe", i: "naik", g: 1 },
            { q: "„ÅØ„ÅÑ„Çã", r: "hairu", v: "v√†o", i: "masuk", g: 1 },
            { q: "„ÅØ„Å™„Åô", r: "hanasu", v: "n√≥i chuy·ªán", i: "bercerita", g: 1 },
            { q: "„Åæ„Å§", r: "matsu", v: "ƒë·ª£i", i: "menunggu", g: 1 },
            { q: "„ÇÇ„Å§", r: "motsu", v: "c·∫ßm/mang", i: "membawa", g: 1 },
            { q: "„ÇÑ„Åô„ÇÄ", r: "yasumu", v: "ngh·ªâ ng∆°i", i: "istirahat", g: 1 },
            { q: "„ÅÇ„Åë„Çã", r: "akeru", v: "m·ªü", i: "membuka", g: 2 },
            { q: "„ÅÇ„Åí„Çã", r: "ageru", v: "cho/t·∫∑ng", i: "memberi", g: 2 },
            { q: "„ÅÑ„Çå„Çã", r: "ireru", v: "cho v√†o", i: "memasukkan", g: 2 },
            { q: "„ÅÜ„Åæ„Çå„Çã", r: "umareru", v: "sinh ra", i: "lahir", g: 2 },
            { q: "„Åä„Åç„Çã", r: "okiru", v: "th·ª©c d·∫≠y", i: "bangun", g: 2 },
            { q: "„Åä„Åó„Åà„Çã", r: "oshieru", v: "d·∫°y", i: "mengajar", g: 2 },
            { q: "„Åä„Åº„Åà„Çã", r: "oboeru", v: "nh·ªõ", i: "mengingat", g: 2 },
            { q: "„Åã„Åë„Çã", r: "kakeru", v: "g·ªçi ƒëi·ªán", i: "menelepon", g: 2 },
            { q: "„Åã„Çä„Çã", r: "kariru", v: "m∆∞·ª£n", i: "meminjam", g: 2 },
            { q: "„Åç„Åà„Çã", r: "kieru", v: "t·∫Øt", i: "padam", g: 2 },
            { q: "„Åó„ÇÅ„Çã", r: "shimeru", v: "ƒë√≥ng", i: "menutup", g: 2 },
            { q: "„Åü„Åπ„Çã", r: "taberu", v: "ƒÉn", i: "makan", g: 2 },
            { q: "„Åß„Çã", r: "deru", v: "ra ngo√†i", i: "keluar", g: 2 },
            { q: "„Å™„Çâ„Åπ„Çã", r: "naraberu", v: "x·∫øp h√†ng", i: "menyusun", g: 2 },
            { q: "„Å≠„Çã", r: "neru", v: "ng·ªß", i: "tidur", g: 2 },
            { q: "„Åø„Åõ„Çã", r: "miseru", v: "cho xem", i: "memperlihatkan", g: 2 },
            { q: "„Åø„Çã", r: "miru", v: "xem", i: "melihat", g: 2 },
            { q: "„Çè„Åô„Çå„Çã", r: "wasureru", v: "qu√™n", i: "lupa", g: 2 },
            { q: "„Åè„Çã", r: "kuru", v: "ƒë·∫øn", i: "datang", g: 3 },
            { q: "„Åô„Çã", r: "suru", v: "l√†m", i: "melakukan", g: 3 },
            { q: "„Åï„Çì„ÅΩ„Åô„Çã", r: "sanposuru", v: "ƒëi d·∫°o", i: "jalan-jalan", g: 3 }
        ];

        let quizList = [];
        let current = 0;

        function speak(text) {
            const uttr = new SpeechSynthesisUtterance();
            uttr.text = text;
            uttr.lang = "ja-JP";
            speechSynthesis.speak(uttr);
        }

        function updateUI() {
            const lang = document.getElementById("lang-select").value;
            const text = uiText[lang];
            document.getElementById("nav-quiz").innerText = text.study;
            document.getElementById("nav-list").innerText = text.list;
            document.getElementById("list-title").innerText = text.list;
            const modeSelect = document.getElementById("mode-select");
            modeSelect.options[0].text = text.jpTo;
            modeSelect.options[1].text = text.forTo;
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId + '-page').classList.add('active');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));
            document.getElementById('nav-' + pageId).classList.add('active-nav');
            if(pageId === 'list') renderList();
        }

        function renderList() {
            const lang = document.getElementById("lang-select").value;
            const container = document.getElementById('verb-list-container');
            container.innerHTML = "";
            [1, 2, 3].forEach(groupNum => {
                const title = document.createElement('div');
                title.className = 'group-title';
                title.innerText = "Group " + groupNum;
                container.appendChild(title);
                allData.filter(d => d.g === groupNum).forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'list-item';
                    div.onclick = () => speak(item.q);
                    const meaning = (lang === "vi") ? item.v : item.i;
                    div.innerHTML = `<div style="text-align:left"><div class="list-ja">${item.q} <span style="font-size:12px;color:#ccc">${item.r}</span></div><div style="color:#666">${meaning}</div></div><div style="color:#FF5252">üîä</div>`;
                    container.appendChild(div);
                });
            });
        }

        function initGame() {
            updateUI();
            quizList = [...allData].sort(() => Math.random() - 0.5);
            current = 0;
            showQuestion();
            if(document.getElementById('list-page').classList.contains('active')) renderList();
        }

        function showQuestion() {
            const lang = document.getElementById("lang-select").value;
            const mode = document.getElementById("mode-select").value;
            const item = quizList[current];
            const card = document.getElementById("main-card");
            card.classList.remove("correct-jump");
            document.getElementById("progress").innerText = (current + 1) + " / " + quizList.length;
            
            let correct, opts;
            const foreignMeaning = (lang === "vi") ? item.v : item.i;
            const allForeignMeanings = allData.map(d => (lang === "vi") ? d.v : d.i);

            if(mode === "ja-to-foreign") {
                document.getElementById("word").innerText = item.q;
                document.getElementById("reading").innerText = item.r;
                correct = foreignMeaning;
                opts = allForeignMeanings;
            } else {
                document.getElementById("word").innerText = foreignMeaning;
                document.getElementById("reading").innerText = "";
                correct = item.q;
                opts = allData.map(d => d.q);
            }

            let choices = [correct];
            while(choices.length < 4) {
                let r = opts[Math.floor(Math.random() * opts.length)];
                if(!choices.includes(r)) choices.push(r);
            }
            choices.sort(() => Math.random() - 0.5);

            const container = document.getElementById("options-container");
            container.innerHTML = "";
            choices.forEach(c => {
                const btn = document.createElement("button");
                btn.className = "opt-btn";
                btn.innerText = c;
                btn.onclick = () => {
                    if(c === correct) {
                        speak(item.q);
                        card.classList.add("correct-jump");
                        document.getElementById("message").innerText = "‚≠ï OK!";
                        setTimeout(() => { 
                            current++; 
                            if(current < quizList.length) showQuestion(); 
                            else { 
                                alert(uiText[lang].finish); 
                                initGame(); 
                            }
                            document.getElementById("message").innerText = "";
                        }, 600);
                    } else {
                        document.getElementById("message").innerText = "‚ùå No";
                    }
                };
                container.appendChild(btn);
            });
        }
        initGame();
    </script>
</body>
</html>
